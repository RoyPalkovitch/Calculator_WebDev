<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="/style.css">



</head>

<body>
  <div id="main">
    <section id="left" class="container text-center">
      <div class="col">
        <div id="show-info" class="col top" onclick="alert()">1</div>
        <div id="color-mode" class="col" onclick="alert()">2</div>
        <div id="show-history" class="col" onclick="alert()">3</div>
        <div id="show-scient" class="col" onclick="alert()">4</div>
        <div id="remote-calc" class="col" onclick="alert()">5</div>
        <div id="" class="col"></div>
        <div id="" class="col"></div>
      </div>
    </section>
    <section id="center" class="container text-center">
      <div class="col">
        <div class="col top">My calculator</div>
        <div id="display" class="col">
        </div>
        <div id="clear" class="col" onclick="calculator('clear')" style="font-weight: bold;">C</div>
        <div class="row">
          <div class="col" onclick="calculator('num','7')">7</div>
          <div class="col" onclick="calculator('num','8')">8</div>
          <div class="col" onclick="calculator('num','9')">9</div>
        </div>
        <div class="row">
          <div class="col" onclick="calculator('num','4')">4</div>
          <div class="col" onclick="calculator('num','5')">5</div>
          <div class="col" onclick="calculator('num','6')">6</div>
        </div>
        <div class="row">
          <div class="col" onclick="calculator('num','1')">1</div>
          <div class="col" onclick="calculator('num','2')">2</div>
          <div class="col" onclick="calculator('num','3')">3</div>
        </div>
        <div class="row">
          <div class="col" onclick="calculator('negative_state')">Â±</div>
          <div class="col" onclick="calculator('num','0')">0</div>
          <div class="col" onclick="calculator('num','.')">.</div>
        </div>
      </div>
    </section>
    <section id="right" class="container text-center">
      <div class="col">
        <div class="col top" onclick="alert()">1</div>
        <div class="col" onclick="calculator('back','')">Back</div>
        <div class="col" onclick="calculator('operation','/')">/</div>
        <div class="col" onclick="calculator('operation','X')">X</div>
        <div class="col" onclick="calculator('operation','-')">-</div>
        <div class="col" onclick="calculator('operation','+')">+</div>
        <div class="col" onclick="alert()">=</div>
      </div>
    </section>
  </div>
</body>

<script>
  //Iniziallize param
  const display = document.getElementById('display');
  display.innerHTML = '0';
  let num_1 = '0';//first number displayed
  let num_2 = '';//second number displayed
  let is_negative = false; //negative state
  let is_float = false; // is number floating point
  let operation = ''; //if operation
  let current_result = NaN;
  function calculator(type, value) {

    switch (type) {
      case 'num':
        if (operation == '') {
          if (is_negative) {
            num_1 = change_negative_state(num_1);
            num_1 = show(num_1, value);
            num_1 = change_negative_state(num_1);
          } else {
            num_1 = show(num_1, value);
          }
          display.innerHTML = num_1;
        } else {

          if (is_negative) {
            num_2 = change_negative_state(num_2);
            num_2 = show(num_2, value);
            num_2 = change_negative_state(num_2);
          } else {
            num_2 = show(num_2, value);
          }
          display.innerHTML = num_1 + operation + num_2;
        }
        break;

      case 'negative_state':
        if (operation == '') {
          num_1 = change_negative_state(num_1);
          display.innerHTML = num_1;

        } else {
          if (num_2 === '') {
            num_2 = 0;
          }
          num_2 = change_negative_state(num_2);
          display.innerHTML = num_1 + operation + num_2;
        }
        break;

      case 'operation':
        add_operation(value)
        break;

      case 'back':
        back();
        break;


      case 'clear':
        clear();
        break;



    }
  }



  function clear() {
    display.innerHTML = '0';
     num_1 = '0';
     num_2 = '';
     is_negative = false; 
     is_float = false; 
     operation = ''; 
     current_result = NaN;

  }

  function back() {
    if (operation == '') {
      if (num_1.includes('-')) {
        is_negative = true;
        num_1 = change_negative_state(num_1);
        num_1 = num_1.slice(0, num_1.length - 1);
        if (num_1 == '') {
          num_1 = '0';
          display.innerHTML = num_1;
          return;
        }
        num_1 = change_negative_state(num_1);
        display.innerHTML = num_1;
      } else {
        num_1 = num_1.slice(0, num_1.length - 1);
        if (num_1 == '') {
          num_1 = '0';
        }
        display.innerHTML = num_1;
      }
    } else if (operation !== '' && num_2 === '') {
      display.innerHTML = num_1;
      operation = '';
    }
    else {
      if (is_negative) {
        num_2 = change_negative_state(num_2);
        num_2 = num_2.slice(0, num_2.length - 1);
        if (num_2 === '') {
          display.innerHTML = num_1 + operation + num_2;
          return;
        }
        num_2 = change_negative_state(num_2);
        display.innerHTML = num_1 + operation + num_2;

      } else {
        num_2 = num_2.slice(0, num_2.length - 1);

        display.innerHTML = num_1 + operation + num_2;
      }
    }
  }
  function change_negative_state(num) {
    is_negative = !is_negative;
    if (is_negative) {
      return '(-' + num + ')';
    } else {
      return num.slice(2, num.length - 1);
    }

  }


  function show(num, x) {
    if (x === '.' && !is_float) {
      is_float = true;
      return num + x;
    } else if (x === '.' && is_float) {
      return num
    }

    if (num === '0' && !is_float) {
      return x;
    }
    else {
      return num + x
    }
  }

  function add_operation(value) {
    if (num_2 === '') {
      if (operation === '') {
        operation = value;
        display.innerHTML += operation;
        is_float = false;
        is_negative = false;
      } else {
        display.innerHTML = display.innerHTML.slice(0, display.innerHTML.indexOf(num_1[num_1.length - 1]) + 1) + value + num_2;
        operation = value
      }
    } else {
      math_operation();
      operation = value;
      if (current_result < 0) {
        is_negative = false;
        num_1 = change_negative_state((current_result * -1).toString());
      } else {

        num_1 = current_result.toString();
      }
      display.innerHTML += operation;
      is_float = false;
      is_negative = false;
      num_2 = '';
    }
  }

  function math_operation() {
    let val_1 = 0;
    let val_2 = 0;
    if (num_1.includes('-')) {
      is_negative = true;
      num_1 = change_negative_state(num_1);
      if (num_1.includes('.')) {
        val_1 = parseFloat(num_1) * -1;
      } else {
        val_1 = parseInt(num_1) * -1;
      }
      num_1 = change_negative_state(num_1);
    }
    else {
      if (num_1.includes('.')) {
        val_1 = parseFloat(num_1);
      } else {
        val_1 = parseInt(num_1);
      }
    }
    if (num_2.includes('-')) {
      is_negative = true;

      num_2 = change_negative_state(num_2);
      if (num_2.includes('.')) {
        val_2 = parseFloat(num_2) * -1;
      } else {
        val_2 = parseInt(num_2) * -1;
      }
      num_2 = change_negative_state(num_2);
    }
    else {
      if (num_2.includes('.')) {
        val_2 = parseFloat(num_2);
      } else {
        val_2 = parseInt(num_2);
      }
    }

    switch (operation) {
      case '+':
        current_result = (val_1 + val_2);
        break;

      case '-':
        current_result = (val_1 - val_2);
        break;

      case '/':
        current_result = (val_1 / val_2);
        break;
      case 'X':
        current_result = (val_1 * val_2);
        break;

    }

  }


</script>

</html>